<ng-template appPlaceholder></ng-template>
<div *ngIf="isLoading" style="text-align: center">
  <app-loading-spinner></app-loading-spinner>
</div>
<div *ngIf="!needRegister" class="container border rounded shadow-sm mt-2">
  <h2 class="mb-3 mt-3 text-center p-1">Member Profile</h2>
  <hr />
  <h2 class="mb-3 mt-3 text-center lead">Email: {{ userRegEmail }}</h2>
  <div class="container text-center mb-2">
    <button type="button" class="btn btn-outline-dark btn-md text-center" (click)="showDisplayOrders()">{{ pastOrder }}</button>
  </div>


  <div *ngIf="sd" class="container border rounded">
    <ul class="list-group text-center b-1" *ngFor="let order of orders">
      <li class="list-group-item mb-2 mt-2"><b>Order Id-</b>{{ order.orderid }}, <br /> <b>Payment Method-</b>{{ order.paymethod }}, <b>Purchase Date-</b>{{ order.orderdate }}, <b>Total-</b>{{ order.totalsale }}, <b>Purchases-</b>{{ order.products.length }}</li>
    </ul>
  </div>
  <br />
  <form (ngSubmit)="onUpdate()" #memberModel="ngForm">
    <div class="form-row lead">
      <div class="form-group col-md-6">
        <label for="firstname">First name</label>
        <input type="text" class="form-control" id="firstname" placeholder={{model.firstname}} [(ngModel)]="model.firstname" name="firstname" required>
      </div>
      <div class="form-group col-md-6">
        <label for="lastname">Last name</label>
        <input type="text" class="form-control" id="lastname" placeholder={{model.lastname}} [(ngModel)]="model.lastname" name="lastname" required>
      </div>
    </div>
    <div class="form-group lead">
      <label for="addressstreet">Address</label>
      <input type="text" class="form-control" id="addressstreet" placeholder={{model.addressstreet}} [(ngModel)]="model.addressstreet" name="addressstreet" required>
    </div>

    <div class="form-row lead">
      <div class="form-group col-md-6">
        <label for="city">City</label>
        <input type="text" class="form-control" id="city" placeholder={{model.city}} [(ngModel)]="model.city" name="city" required>
      </div>
      <div class="form-group col-md-4 lead">
        <label for="state">State</label>
        <select id="state" class="form-control" [(ngModel)]="model.state" name="state" required>
          <option selected>Choose...</option>
          <option *ngFor="let state of states">{{state}}</option>
        </select>
      </div>
      <div class="form-group col-md-2 lead">
        <label for="zipcode">Zip</label>
        <input type="text" class="form-control" id="zipcode" placeholder={{model.zipcode}} [(ngModel)]="model.zipcode" name="zipcode" required>
      </div>
    </div>
    <div class="form-row lead">
      <div class="form-group col-md-4 lead">
        <label for="country">Country</label>
        <select id="country" class="form-control" [(ngModel)]="model.country" name="country" required>
          <option selected>{{model.country}}</option>
          <option *ngFor="let country of countryList">{{country}}</option>
        </select>
      </div>
      <div class="form-group col-md-4 lead">
        <label for="phone">Phone</label>
        <input type="text" class="form-control" id="phone"  placeholder={{model.phone}} [(ngModel)]="model.phone" name="phone" appPhoneMaskDirective required>
      </div>
    </div>
    <div class="form-row lead justify-content-center">
      <button type="submit" class="btn btn-outline-dark btn-lg" [disabled]="!memberModel.form.valid">Update</button>
    </div>

    <span *ngIf="">Test</span>

  </form>
  <br />
</div>

<!--Register-->
<div *ngIf="needRegister" class="container border rounded shadow-sm">
  <h2 class="mb-3 mt-3 text-center bg-dark p-1 text-white rounded">Complete Registration</h2>
  <h2 class="mb-3 mt-3 text-center lead">Email: {{ userRegEmail }}</h2>
  <form (ngSubmit)="onRegister()" #memberModel="ngForm">
    <div class="form-row lead">
      <div class="form-group col-md-6">
        <label for="firstname">First name</label>
        <input type="text" class="form-control" id="firstname" placeholder={{model.firstname}} [(ngModel)]="model.firstname" name="firstname" required>
      </div>
      <div class="form-group col-md-6">
        <label for="lastname">Last name</label>
        <input type="text" class="form-control" id="lastname" placeholder={{model.lastname}} [(ngModel)]="model.lastname" name="lastname" required>
      </div>
    </div>
    <div class="form-group lead">
      <label for="addressstreet">Address</label>
      <input type="text" class="form-control" id="addressstreet" placeholder={{model.addressstreet}} [(ngModel)]="model.addressstreet" name="addressstreet" required>
    </div>

    <div class="form-row lead">
      <div class="form-group col-md-6">
        <label for="city">City</label>
        <input type="text" class="form-control" id="city" placeholder={{model.city}} [(ngModel)]="model.city" name="city" required>
      </div>
      <div class="form-group col-md-4 lead">
        <label for="state">State</label>
        <select id="state" class="form-control" [(ngModel)]="model.state" name="state" required>
          <option selected>Choose...</option>
          <option *ngFor="let state of states">{{state}}</option>
        </select>
      </div>
      <div class="form-group col-md-2 lead">
        <label for="zipcode">Zip</label>
        <input type="text" class="form-control" id="zipcode" placeholder={{model.zipcode}} [(ngModel)]="model.zipcode" name="zipcode" required>
      </div>
    </div>
    <div class="form-row lead">
      <div class="form-group col-md-4 lead">
        <label for="country">Country</label>
        <select id="country" class="form-control" [(ngModel)]="model.country" name="country" required>
          <option selected>{{model.country}}</option>
          <option *ngFor="let country of countryList">{{country}}</option>
        </select>
      </div>
      <div class="form-group col-md-4 lead">
        <label for="phone">Phone</label>
        <input type="text" class="form-control" id="phone" placeholder={{model.phone}} [(ngModel)]="model.phone" name="phone" appPhoneMaskDirective required>
      </div>
    </div>
    <div class="form-row lead justify-content-center">
      <button type="submit" class="btn btn-outline-dark btn-lg" [disabled]="!memberModel.form.valid">Register</button>
    </div>

    <span *ngIf="">Test</span>

  </form>
  <br />
  </div>
<br />
